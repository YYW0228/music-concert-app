<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¥åœ°ä¸»é¢˜éŸ³ä¹ä¼š</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#3FA796">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="è¥åœ°éŸ³ä¹ä¼š">
    <link rel="apple-touch-icon" href="/icons/icon-152x152.png">
    
    <!-- PWA iOSå…¼å®¹ -->
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-TileColor" content="#3FA796">
    <meta name="msapplication-tap-highlight" content="no">
    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
        }
        .text-grass-green { color: #3FA796; }
        .bg-grass-green { background-color: #3FA796; }
        .border-grass-green { border-color: #3FA796; }
        .text-lake-blue { color: #8FD6D0; }
        .bg-lake-blue { background-color: #8FD6D0; }
        .border-lake-blue { border-color: #8FD6D0; }
        
        /* æ–°å¢è‰²å½©ä¸»é¢˜ */
        .text-warm-orange { color: #FF8A50; }
        .bg-warm-orange { background-color: #FF8A50; }
        .text-soft-purple { color: #A78BFA; }
        .bg-soft-purple { background-color: #A78BFA; }
        .text-coral-pink { color: #FF6B9D; }
        .bg-coral-pink { background-color: #FF6B9D; }
        .text-golden-yellow { color: #FFC947; }
        .bg-golden-yellow { background-color: #FFC947; }
        .active-filter {
            background-color: #3FA796;
            color: white;
            font-weight: 500;
        }
        .inactive-filter {
            background-color: #E9ECEF;
            color: #495057;
        }
        .program-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .program-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 640px) {
            .chart-container {
                height: 350px;
            }
        }
        #music-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            background-color: rgba(63, 167, 150, 0.8);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            backdrop-filter: blur(5px);
            transition: all 0.3s ease;
        }
        
        #music-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 16px rgba(0,0,0,0.3);
        }
        
        /* å¢å¼ºèƒŒæ™¯å±‚æ¬¡æ„Ÿ */
        body {
            background: linear-gradient(135deg, #f0fff4 0%, #e8f5f0 30%, #d0f0c0 60%, #3FA796 100%);
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }
        
        /* åŠ¨æ€èƒŒæ™¯è£…é¥° */
        body::before {
            content: '';
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(63,167,150,0.1) 0%, transparent 50%);
            animation: float 20s ease-in-out infinite;
            z-index: -1;
        }
        
        @keyframes float {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(30px, -30px) rotate(120deg); }
            66% { transform: translate(-20px, 20px) rotate(240deg); }
        }
        
        /* éŸ³ä¹æç¤ºæ–‡å­— */
        .music-hint {
            position: fixed;
            bottom: 80px;
            right: 10px;
            background: rgba(63, 167, 150, 0.9);
            color: white;
            padding: 8px 12px;
            border-radius: 15px;
            font-size: 12px;
            display: none;
            z-index: 999;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 0.8; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.05); }
            100% { opacity: 0.8; transform: scale(1); }
        }
        
        /* ç´§å‡‘å¸ƒå±€ä¼˜åŒ– */
        .container { 
            max-width: 4xl; 
            padding: 1rem 1rem; 
        }
        
        section { 
            margin-bottom: 1.5rem !important; 
        }
        
        .section-content { 
            padding: 1.5rem !important; 
        }
        
        /* ä¼˜åŒ–åŠ¨æ•ˆ - æ¶ˆé™¤é—ªå± */
        .animate-fade-in { 
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.6s ease-out forwards; 
        }
        
        .animate-bounce-in { 
            opacity: 0;
            transform: scale(0.95);
            animation: smoothBounceIn 0.8s ease-out forwards; 
        }
        
        @keyframes fadeInUp {
            0% { opacity: 0; transform: translateY(20px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes smoothBounceIn {
            0% { opacity: 0; transform: scale(0.95); }
            60% { opacity: 1; transform: scale(1.02); }
            100% { opacity: 1; transform: scale(1); }
        }
        
        /* å»¶è¿ŸåŠ¨ç”»å¼€å§‹ */
        .animate-delay-1 { animation-delay: 0.1s; }
        .animate-delay-2 { animation-delay: 0.2s; }
        .animate-delay-3 { animation-delay: 0.3s; }
        .animate-delay-4 { animation-delay: 0.4s; }
        
        /* å…ƒç´ æ‚¬åœå¢å¼º */
        .section-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(63,167,150,0.15);
        }
        
        /* ç§»åŠ¨ç«¯ä¼˜åŒ– */
        @media (max-width: 768px) {
            .container { padding: 0.5rem 1rem; }
            h1 { font-size: 1.8rem !important; }
            #countdown { font-size: 1.3rem !important; }
            .chart-container { height: 220px; }
            .section-content { padding: 1rem !important; }
            section { margin-bottom: 1rem !important; }
            #music-toggle { 
                width: 45px; 
                height: 45px; 
                bottom: 15px; 
                right: 15px; 
            }
            .music-hint { 
                bottom: 70px; 
                right: 5px; 
                font-size: 11px; 
                padding: 6px 10px; 
            }
        }
        
        /* èŠ‚ç›®å¡ç‰‡å¢å¼ºæ•ˆæœ */
        .program-card {
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }
        
        .program-card:hover {
            border-left-color: #3FA796;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        /* ç­›é€‰æŒ‰é’®å¢å¼º */
        .filter-btn {
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .filter-btn:before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255,255,255,0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.3s ease, height 0.3s ease;
        }
        
        .filter-btn:hover:before {
            width: 100%;
            height: 100%;
        }
    </style>
    <!-- å¼ºåˆ¶é‡å»ºæ ‡è¯†: 1759820721469 -->
    <meta name="build-id" content="1759820721469">
</head>
<body class="bg-green-50 text-gray-800">
    
    <!-- å¤šé¦–è½»å¿«éŸ³ä¹æ’­æ”¾åˆ—è¡¨ -->
    <audio id="bg-music" preload="metadata">
        <!-- å¥¥èŠ¬å·´èµ« - å¡å†œèˆæ›² (ä¸»æ¨è) -->
        <source src="https://cdn.pixabay.com/download/audio/2023/02/22/audio_e3a51c4c7f.mp3?filename=cancan-can-can-by-offenbach-classical-music-for-the-orchestra-9705.mp3" type="audio/mpeg">
        <!-- å¤‡ç”¨å¡å†œèˆæ›²ç‰ˆæœ¬ -->
        <source src="https://www.soundjay.com/misc/sounds/cancan.mp3" type="audio/mpeg">
        <!-- ä¹…çŸ³è®©é£æ ¼å¤‡ç”¨ -->
        <source src="https://cdn.pixabay.com/download/audio/2022/01/18/audio_0d6e3e7ce8.mp3?filename=beautiful-piano-loop-6877.mp3" type="audio/mpeg">
    </audio>
    
    <!-- æ·»åŠ å¤‡ç”¨Web Audio APIéŸ³é¢‘ç”Ÿæˆ -->
    <script>
        // åˆ›å»ºä¹…çŸ³è®©é£æ ¼çš„ç®€å•æ—‹å¾‹
        function createSummerMelody() {
            if (typeof AudioContext !== 'undefined' || typeof webkitAudioContext !== 'undefined') {
                const context = new (window.AudioContext || window.webkitAudioContext)();
                const notes = [523.25, 587.33, 659.25, 698.46, 783.99, 880.00]; // C5-A5
                let currentTime = context.currentTime;
                
                notes.forEach((freq, index) => {
                    const oscillator = context.createOscillator();
                    const gainNode = context.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(context.destination);
                    
                    oscillator.frequency.setValueAtTime(freq, currentTime);
                    oscillator.type = 'sine';
                    
                    gainNode.gain.setValueAtTime(0, currentTime);
                    gainNode.gain.linearRampToValueAtTime(0.1, currentTime + 0.1);
                    gainNode.gain.linearRampToValueAtTime(0, currentTime + 0.8);
                    
                    oscillator.start(currentTime);
                    oscillator.stop(currentTime + 0.8);
                    
                    currentTime += 0.5;
                });
                
                return true;
            }
            return false;
        }
        
        window.createSummerMelody = createSummerMelody;
        
        // PWA Service Worker æ³¨å†Œ
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('SW registered: ', registration);
                    })
                    .catch(registrationError => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }
        
        // PWAå®‰è£…æç¤º
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            console.log('PWAå®‰è£…æç¤º');
            e.preventDefault();
            deferredPrompt = e;
            // å¯ä»¥åœ¨è¿™é‡Œæ˜¾ç¤ºè‡ªå®šä¹‰å®‰è£…æŒ‰é’®
            showInstallButton();
        });
        
        function showInstallButton() {
            // åˆ›å»ºå®‰è£…æŒ‰é’®
            const installBtn = document.createElement('button');
            installBtn.textContent = 'ğŸ“± å®‰è£…åˆ°æ¡Œé¢';
            installBtn.className = 'fixed bottom-20 left-4 bg-grass-green text-white px-4 py-2 rounded-lg shadow-lg text-sm z-1000';
            installBtn.onclick = () => {
                if (deferredPrompt) {
                    deferredPrompt.prompt();
                    deferredPrompt.userChoice.then((choiceResult) => {
                        console.log('ç”¨æˆ·é€‰æ‹©:', choiceResult.outcome);
                        deferredPrompt = null;
                        document.body.removeChild(installBtn);
                    });
                }
            };
            document.body.appendChild(installBtn);
            
            // 5ç§’åè‡ªåŠ¨éšè—
            setTimeout(() => {
                if (document.body.contains(installBtn)) {
                    document.body.removeChild(installBtn);
                }
            }, 10000);
        }
    </script>
    <div id="music-toggle">
        <span id="music-icon">ğŸµ</span>
    </div>
    <div class="music-hint" id="music-hint">ğŸµ å¥¥èŠ¬å·´èµ« - å¡å†œèˆæ›² (ç»å…¸èƒŒæ™¯éŸ³ä¹)</div>

    <div class="container mx-auto max-w-4xl">

        <header class="section-card animate-bounce-in text-center section-content bg-white rounded-xl shadow-lg mb-6" style="background: linear-gradient(135deg, #F0FFF4 0%, #E8F5F0 50%, #3FA796 100%); background-size: cover; background-position: center;">
            <div class="bg-white/80 backdrop-blur-sm p-4 rounded-lg">
                <h1 class="text-4xl md:text-5xl font-bold text-grass-green mb-2">ğŸ¶ è¥åœ°ä¸»é¢˜éŸ³ä¹ä¼š</h1>
                <p class="text-lg text-gray-600">ä¸€åœºç®€çº¦å‡ ä½•ä¸è‰²å½©çš„äº¤å“</p>
                <div id="countdown" class="text-2xl md:text-3xl font-bold text-gray-700 mt-6 space-x-2">
                    <span><span id="days">00</span>å¤©</span>
                    <span><span id="hours">00</span>æ—¶</span>
                    <span><span id="minutes">00</span>åˆ†</span>
                    <span><span id="seconds">00</span>ç§’</span>
                </div>
                <p class="mt-2 text-sm text-gray-500">è·ç¦»éŸ³ä¹ä¼šå¼€å§‹</p>
            </div>
        </header>


        <section id="intro" class="section-card animate-fade-in animate-delay-1 bg-white rounded-xl shadow-lg section-content mb-6">
            <h2 class="text-xl font-bold text-center mb-3 text-grass-green">è‰¾éŸ³è‰ºæœ¯æ•™è‚²ï¼šé™ªä¼´æ¯ä¸€é¢—éŸ³ä¹ç§å­å‘èŠ½</h2>
            <div class="text-gray-700 space-y-3 text-left max-w-3xl mx-auto leading-relaxed text-sm">
                <p>æ¯ä¸€ä¸ªå­©å­å¿ƒä¸­ï¼Œéƒ½æœ‰ä¸€é¢—ç­‰å¾…å‘èŠ½çš„éŸ³ä¹ç§å­ã€‚è‡ª2010å¹´èµ·ï¼Œè‰¾éŸ³è‰ºæœ¯æ•™è‚²ä¾¿ä»¥â€œçˆ±â€ä¸â€œä¸“ä¸šâ€ä¸ºåœŸå£¤ï¼Œåœ¨è¿™ç‰‡å›­åœ°é‡Œè€•è€˜äº†åäº”å¹´ã€‚</p>
                <p>æˆ‘ä»¬æ·±çŸ¥ï¼Œå¥½çš„è€å¸ˆæ˜¯å­©å­æœ€å¥½çš„å¼•è·¯äººã€‚å› æ­¤ï¼Œæˆ‘ä»¬åšæŒè˜ç”¨æ‹¥æœ‰5å¹´ä»¥ä¸Šçš„ä¸€çº¿ç»éªŒçš„èµ„æ·±æ•™å¸ˆï¼Œä»–ä»¬æ‡‚å¾—å¦‚ä½•å€¾å¬ã€å¦‚ä½•å¼•å¯¼ï¼Œç”¨ç²¾å‡†é«˜æ•ˆçš„æ•™å­¦æ–¹æ³•ï¼Œå®ˆæŠ¤å¹¶æ¿€å‘å­©å­ä¸ç”Ÿä¿±æ¥çš„å¤©èµ‹ã€‚</p>
                <p>ä»é’¢ç´çš„é»‘ç™½é”®ï¼Œåˆ°å£°ä¹çš„æ‚ æ‰¬ï¼Œå†åˆ°å¤ç­çš„å¤å…¸éŸµå‘³ï¼Œæˆ‘ä»¬è§è¯äº†æ— æ•°å­©å­ä»é›¶åŸºç¡€åˆ°è‡ªä¿¡åœ°ç«™ä¸Šå¸‚ã€çœä¹ƒè‡³å…¨å›½çš„èˆå°ã€‚è¿™äº›è£èª‰ä¸ä»…æ˜¯æŠ€å·§çš„è¯æ˜ï¼Œæ›´æ˜¯ä»–ä»¬æˆé•¿è·¯ä¸Šé—ªäº®çš„å‹‹ç« ã€‚</p>
                <p>åœ¨è‰¾éŸ³ï¼Œæˆ‘ä»¬ä¸æ‚¨ä¸€åŒæœŸå¾…ï¼Œå­©å­å¥å“å±äºè‡ªå·±çš„åç¾ä¹ç« ã€‚</p>
            </div>
        </section>

        <section id="analysis" class="section-card animate-fade-in animate-delay-2 bg-white rounded-xl shadow-lg section-content mb-6">
             <h2 class="text-xl font-bold text-center mb-4 text-grass-green">èŠ‚ç›®é€Ÿè§ˆ</h2>
             <p class="text-center text-gray-600 max-w-2xl mx-auto mb-6 text-sm">
                æœ¬æ¬¡éŸ³ä¹ä¼šæ±‡é›†äº†å¤šç§å¤šæ ·çš„è¡¨æ¼”å½¢å¼ã€‚é€šè¿‡ä¸‹é¢çš„å›¾è¡¨å’Œç»Ÿè®¡æ•°æ®ï¼Œæ‚¨å¯ä»¥å¿«é€Ÿäº†è§£æ•´åœºéŸ³ä¹ä¼šçš„èŠ‚ç›®æ„æˆã€‚
             </p>
             <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                 <div class="w-full">
                     <div class="chart-container">
                         <canvas id="programChart"></canvas>
                     </div>
                 </div>
                 <div class="grid grid-cols-2 gap-4 text-center">
                     <div class="bg-gray-100 p-4 rounded-lg">
                         <p class="text-3xl font-bold text-grass-green" id="total-programs">0</p>
                         <p class="text-gray-600">æ€»èŠ‚ç›®æ•°</p>
                     </div>
                     <div class="bg-gray-100 p-4 rounded-lg">
                        <p class="text-3xl font-bold text-grass-green" id="total-performers">0</p>
                        <p class="text-gray-600">è¡¨æ¼”äººæ•°</p>
                    </div>
                     <div class="bg-gray-100 p-4 rounded-lg">
                         <p class="text-3xl font-bold text-grass-green" id="piano-count">0</p>
                         <p class="text-gray-600">å™¨ä¹</p>
                     </div>
                     <div class="bg-gray-100 p-4 rounded-lg">
                         <p class="text-3xl font-bold text-grass-green" id="vocal-count">0</p>
                         <p class="text-gray-600">å£°ä¹</p>
                     </div>
                 </div>
             </div>
        </section>

        <section id="program" class="section-card animate-fade-in animate-delay-3 bg-white rounded-xl shadow-lg section-content mb-6">
            <h2 class="text-xl font-bold text-center mb-3 text-grass-green">ğŸŒ¿ è¯¦ç»†èŠ‚ç›®å•</h2>
            <p class="text-center text-gray-600 max-w-2xl mx-auto mb-4 text-sm">
                åœ¨è¿™é‡Œï¼Œæ‚¨å¯ä»¥æµè§ˆå®Œæ•´çš„éŸ³ä¹ä¼šèŠ‚ç›®åˆ—è¡¨ã€‚æˆ‘ä»¬æä¾›äº†ä¾¿æ·çš„ç­›é€‰åŠŸèƒ½ï¼Œç‚¹å‡»ä¸‹æ–¹æŒ‰é’®ï¼Œå³å¯æŸ¥çœ‹ç‰¹å®šç±»å‹çš„è¡¨æ¼”ã€‚
            </p>
            <div id="filters" class="flex flex-wrap justify-center gap-2 mb-6">
                <button class="filter-btn active-filter px-4 py-2 rounded-full text-sm font-medium transition" data-filter="all">å…¨éƒ¨</button>
                <button class="filter-btn inactive-filter px-4 py-2 rounded-full text-sm font-medium transition" data-filter="é’¢ç´">é’¢ç´ç‹¬å¥</button>
                <button class="filter-btn inactive-filter px-4 py-2 rounded-full text-sm font-medium transition" data-filter="å£°ä¹">å£°ä¹ç‹¬å”±</button>
                <button class="filter-btn inactive-filter px-4 py-2 rounded-full text-sm font-medium transition" data-filter="åˆå”±">å°ç»„å”±</button>
                <button class="filter-btn inactive-filter px-4 py-2 rounded-full text-sm font-medium transition" data-filter="å™¨ä¹">å…¶ä»–ä¹å™¨</button>
            </div>

            <div id="program-list" class="space-y-4">
            </div>
        </section>

        <section id="details" class="section-card animate-fade-in animate-delay-4 bg-white rounded-xl shadow-lg section-content mb-6">
            <h2 class="text-xl font-bold text-center mb-4 text-grass-green">ğŸª æ´»åŠ¨ä¿¡æ¯</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-center">
                <div class="bg-green-50 p-4 rounded-lg transform hover:scale-105 transition-transform duration-300">
                    <div class="text-4xl mb-2">ğŸ—“ï¸</div>
                    <h3 class="font-semibold text-lg">æ—¶é—´</h3>
                    <p class="text-gray-600">2025å¹´10æœˆ8æ—¥ (å‘¨ä¸‰) 16:30</p>
                </div>
                <div class="bg-blue-50 p-4 rounded-lg transform hover:scale-105 transition-transform duration-300">
                    <div class="text-4xl mb-2">ğŸ“</div>
                    <h3 class="font-semibold text-lg">åœ°ç‚¹</h3>
                    <p class="text-gray-600">å±¿ä¼—è¥åœ°Â·æœ¨å±‹</p>
                    <p class="text-sm text-gray-500">æ¼³å·å¸‚é¾™æ–‡åŒºè“ç”°è¡—é“æ±Ÿæ»¨ä¸œè·¯11å·</p>
                </div>
                <div class="bg-yellow-50 p-4 rounded-lg transform hover:scale-105 transition-transform duration-300">
                    <div class="text-4xl mb-2">ğŸŒŸ</div>
                    <h3 class="font-semibold text-lg">ä¸»åŠæ–¹</h3>
                    <p class="text-gray-600">è‰¾éŸ³è‰ºæœ¯æ•™è‚²</p>
                </div>
            </div>
        </section>

        <footer class="section-card animate-fade-in text-center mt-6 section-content bg-grass-green text-white rounded-xl shadow-lg">
            <h3 class="text-xl font-bold">ğŸ“² è”ç³»æˆ‘ä»¬</h3>
            <p class="mt-2">ä¸»åŠæ–¹ï¼šè‰¾éŸ³è‰ºæœ¯æ•™è‚²</p>
            <p class="mt-1">è”ç³»äººï¼šé‚“è€å¸ˆ</p>
            <a href="tel:17365166266" class="mt-2 inline-block bg-white text-grass-green font-semibold px-4 py-2 rounded-lg hover:bg-gray-100 transition">17365166266</a>
            <p class="mt-4 text-sm opacity-80">ï¼ˆæ‰«ç æ·»åŠ å¾®ä¿¡äº†è§£è¯¦æƒ…ğŸ‘‡ï¼‰</p>
            <div class="w-40 h-40 bg-white mx-auto mt-3 rounded-lg p-2 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105">
                <img src="static/images/contact-qr.jpg" 
                     alt="è”ç³»æˆ‘ä»¬å¾®ä¿¡äºŒç»´ç "
                     class="w-full h-full object-contain rounded-lg"
                     loading="lazy">
            </div>
        </footer>
    </div>

    <script>
        const programData = [
            { id: 1, performer: 'åˆå”±å›¢å‘˜', type: 'åˆå”±', title: 'ã€Šæœ€äº®çš„æ˜Ÿæ˜Ÿã€‹', instrument: 'ç‹¬å”±' },
            { id: 2, performer: 'å¶æ­†ç¥', type: 'é’¢ç´', title: 'ã€Šå°é›¨èèã€‹ã€Šé€åˆ«ã€‹', instrument: 'ç‹¬å¥' },
            { id: 3, performer: 'è‚–å­æ°', type: 'é’¢ç´', title: 'ã€Šåä¸ªå°å°ç¬¬å®‰äººã€‹ã€Šæ‰è¿·è—ã€‹', instrument: 'ç‹¬å¥' },
            { id: 4, performer: 'æœ±å‡Œå°§', type: 'å£°ä¹', title: 'ã€Šå¸Œæœ›ä½ è¢«è¿™ä¸ªä¸–ç•Œçˆ±ç€ã€‹', instrument: 'ç‹¬å”±' },
            { id: 5, performer: 'å‘¨å­æ‚¦', type: 'é’¢ç´', title: 'ã€Šè“ç²¾çµä¹‹æ­Œã€‹', instrument: 'ç‹¬å¥' },
            { id: 6, performer: 'é‚±é‚“ç¥', type: 'å£°ä¹', title: 'ã€Šå¤©ä½¿çš„ç¿…è†€ã€‹', instrument: 'ç‹¬å”±' },
            { id: 7, performer: 'åˆå”±å›¢å‘˜', type: 'åˆå”±', title: 'ã€Šå£°å£°æ…¢ã€‹', instrument: 'ç‹¬å”±' },
            { id: 8, performer: 'å•æ²æ™—', type: 'é’¢ç´', title: 'ã€Šè·ƒã€‹', instrument: 'ç‹¬å¥' },
            { id: 9, performer: 'å°¤é’°å½¤', type: 'å™¨ä¹', title: 'ã€Šä¸°æ”¶é”£é¼“ã€‹', instrument: 'ç‹¬å¥' },
            { id: 10, performer: 'å°¤å­å‹‹', type: 'å£°ä¹', title: 'ã€Šä¸ƒé‡Œé¦™ã€‹', instrument: 'ç‹¬å”±' },
            { id: 11, performer: 'éƒ‘ä¾çµ', type: 'é’¢ç´', title: 'ç»ƒä¹ æ›²Op849.No17', instrument: 'ç‹¬å¥' },
            { id: 12, performer: 'åº„é–æ¡', type: 'é’¢ç´', title: 'ã€Šè“ç²¾çµä¹‹æ­Œã€‹', instrument: 'ç‹¬å¥' },
            { id: 13, performer: 'å¼ é›¨ä¹', type: 'å™¨ä¹', title: 'ã€Šé’èŠ±ç“·ã€‹', instrument: 'ç‹¬å¥' }
        ];

        document.addEventListener('DOMContentLoaded', () => {
            const programListContainer = document.getElementById('program-list');
            const filtersContainer = document.getElementById('filters');
            const music = document.getElementById('bg-music');
            const musicToggle = document.getElementById('music-toggle');
            const musicIcon = document.getElementById('music-icon');
            const musicHint = document.getElementById('music-hint');

            let isPlaying = false;

            // åˆ›å»ºéŸ³é¢‘ä¸Šä¸‹æ–‡ä»¥ç¡®ä¿æ’­æ”¾æˆåŠŸ
            let audioContext;
            let audioBuffer;
            let audioSource;

            // åˆå§‹åŒ–éŸ³é¢‘ç³»ç»Ÿ
            function initAudio() {
                try {
                    audioContext = new (window.AudioContext || window.webkitAudioContext)();
                } catch (e) {
                    console.log('Web Audio API not supported');
                }
            }

            // ğŸµ å¥¥èŠ¬å·´èµ«å¡å†œèˆæ›²æ’­æ”¾åˆ—è¡¨
            const musicPlaylist = [
                {
                    title: "å¥¥èŠ¬å·´èµ« - å¡å†œèˆæ›² (Cancan)",
                    src: "https://cdn.pixabay.com/download/audio/2023/02/22/audio_e3a51c4c7f.mp3?filename=cancan-can-can-by-offenbach-classical-music-for-the-orchestra-9705.mp3",
                    duration: 120,
                    composer: "Jacques Offenbach",
                    description: "æ³•å›½ä½œæ›²å®¶å¥¥èŠ¬å·´èµ«çš„ç»å…¸ä½œå“ï¼Œå……æ»¡æ´»åŠ›çš„èˆæ›²"
                },
                {
                    title: "å¥¥èŠ¬å·´èµ« - å¡å†œèˆæ›² (å¤‡ç”¨ç‰ˆæœ¬)",
                    src: "https://www.soundjay.com/misc/sounds/cancan.mp3",
                    duration: 90,
                    composer: "Jacques Offenbach",
                    description: "ç»å…¸å¡å†œèˆæ›²çš„é«˜è´¨é‡ç‰ˆæœ¬"
                },
                {
                    title: "ä¹…çŸ³è®©é£æ ¼ - ä¼˜ç¾é’¢ç´æ›²(å¤‡ç”¨)",
                    src: "https://cdn.pixabay.com/download/audio/2022/01/18/audio_0d6e3e7ce8.mp3?filename=beautiful-piano-loop-6877.mp3",
                    duration: 15,
                    composer: "ä¹…çŸ³è®©é£æ ¼",
                    description: "æ¸©æŸ”ä¼˜ç¾çš„é’¢ç´æ—‹å¾‹ï¼Œå¤‡ç”¨é€‰æ‹©"
                }
            ];

            let currentTrackIndex = 0;
            let trackSwitchTimer;

            // æ™ºèƒ½éŸ³é¢‘è½®æ’­ç®¡ç†å™¨
            function switchToNextTrack() {
                currentTrackIndex = (currentTrackIndex + 1) % musicPlaylist.length;
                const currentTrack = musicPlaylist[currentTrackIndex];
                
                console.log(`ğŸ¶ åˆ‡æ¢åˆ°: ${currentTrack.title}`);
                
                // æ·¡å‡ºå½“å‰éŸ³é¢‘
                music.volume = 0.7;
                const fadeOut = setInterval(() => {
                    if (music.volume > 0.1) {
                        music.volume -= 0.1;
                    } else {
                        clearInterval(fadeOut);
                        
                        // åˆ‡æ¢éŸ³é¢‘æº
                        music.src = currentTrack.src;
                        music.load();
                        
                        // æ·¡å…¥æ–°éŸ³é¢‘
                        music.volume = 0;
                        music.play().then(() => {
                            const fadeIn = setInterval(() => {
                                if (music.volume < 0.6) {
                                    music.volume += 0.1;
                                } else {
                                    clearInterval(fadeIn);
                                    music.volume = 0.7;
                                }
                            }, 100);
                            
                            // æ›´æ–°éŸ³ä¹æç¤º
                            musicHint.textContent = `ğŸµ ${currentTrack.title}`;
                            musicHint.style.display = 'block';
                            setTimeout(() => {
                                musicHint.style.display = 'none';
                            }, 3000);
                            
                            // è®¾ç½®ä¸‹æ¬¡åˆ‡æ¢
                            clearTimeout(trackSwitchTimer);
                            trackSwitchTimer = setTimeout(switchToNextTrack, currentTrack.duration * 1000);
                        });
                    }
                }, 100);
            }

            // éŸ³ä¹æ’­æ”¾é”™è¯¯å¤„ç†
            music.addEventListener('error', (e) => {
                console.log('å½“å‰éŸ³æºåŠ è½½å¤±è´¥ï¼Œåˆ‡æ¢åˆ°ä¸‹ä¸€é¦–');
                switchToNextTrack();
            });

            music.addEventListener('loadstart', () => {
                console.log('ğŸµ åŠ è½½å¥¥èŠ¬å·´èµ«å¡å†œèˆæ›²...');
            });

            music.addEventListener('canplay', () => {
                console.log('âœ… éŸ³ä¹å·²å‡†å¤‡å°±ç»ª');
                musicIcon.textContent = 'ğŸµ';
            });

            // å¤‡ç”¨éŸ³é¢‘åŠ è½½
            function loadBackupAudio() {
                console.log('åŠ è½½å¤‡ç”¨éŸ³é¢‘ï¼šä¹…çŸ³è®©é£æ ¼æ—‹å¾‹');
                if (window.createSummerMelody) {
                    const success = window.createSummerMelody();
                    if (success) {
                        musicIcon.textContent = 'ğŸ¼';
                        musicToggle.style.backgroundColor = 'rgba(255, 193, 71, 0.8)';
                        // æ¯5ç§’é‡å¤æ’­æ”¾æ—‹å¾‹
                        setInterval(() => {
                            if (isPlaying) {
                                window.createSummerMelody();
                            }
                        }, 5000);
                    }
                }
            }

            // éŸ³ä¹åŠ è½½å’Œæ’­æ”¾ç®¡ç†
            let musicLoaded = false;
            
            function loadMusic() {
                if (!musicLoaded) {
                    console.log('å¼€å§‹åŠ è½½ä¹…çŸ³è®©é’¢ç´æ›²...');
                    music.load(); // é‡æ–°åŠ è½½éŸ³é¢‘
                    musicLoaded = true;
                }
            }
            
            function playMusic() {
                loadMusic();
                // è®¾ç½®ç¬¬ä¸€é¦–éŸ³ä¹
                const firstTrack = musicPlaylist[currentTrackIndex];
                music.src = firstTrack.src;
                music.volume = 0.7;
                
                return music.play().then(() => {
                    isPlaying = true;
                    musicIcon.textContent = 'ğŸ¶';
                    musicToggle.style.backgroundColor = 'rgba(63, 167, 150, 0.9)';
                    musicToggle.style.transform = 'scale(1.1)';
                    console.log(`ğŸµ å¼€å§‹æ’­æ”¾è½»å¿«éŸ³ä¹: ${firstTrack.title}`);
                    
                    // æ˜¾ç¤ºå½“å‰æ’­æ”¾ä¿¡æ¯
                    musicHint.textContent = `ğŸµ ${firstTrack.title}`;
                    musicHint.style.display = 'block';
                    setTimeout(() => {
                        musicHint.style.display = 'none';
                    }, 3000);
                    
                    // å¯åŠ¨è½®æ’­æœºåˆ¶
                    clearTimeout(trackSwitchTimer);
                    trackSwitchTimer = setTimeout(switchToNextTrack, firstTrack.duration * 1000);
                }).catch(e => {
                    console.log('éŸ³ä¹æ’­æ”¾å¤±è´¥ï¼Œå°è¯•å¤‡ç”¨æ–¹æ¡ˆ', e);
                    loadBackupAudio();
                    throw e;
                });
            }
            
            // ç”¨æˆ·äº¤äº’å¯åŠ¨éŸ³ä¹
            let hasUserInteracted = false;
            
            function setupUserInteraction() {
                // ç›‘å¬ä»»ä½•ç”¨æˆ·äº¤äº’
                const startMusic = () => {
                    if (!hasUserInteracted) {
                        hasUserInteracted = true;
                        playMusic().catch(() => {
                            console.log('é¦–æ¬¡æ’­æ”¾å¤±è´¥');
                        });
                    }
                };
                
                document.addEventListener('click', startMusic, { once: true });
                document.addEventListener('touchstart', startMusic, { once: true });
                document.addEventListener('keydown', startMusic, { once: true });
                
                // æ˜¾ç¤ºå‹å¥½æç¤º
                setTimeout(() => {
                    musicHint.style.display = 'block';
                    musicHint.textContent = 'ğŸµ ç‚¹å‡»ä»»æ„ä½ç½®æ’­æ”¾ä¹…çŸ³è®©é’¢ç´æ›²';
                }, 2000);
                
                // 10ç§’åå¦‚æœè¿˜æ²¡äº¤äº’ï¼Œæç¤ºç‚¹å‡»éŸ³ä¹æŒ‰é’®
                setTimeout(() => {
                    if (!hasUserInteracted && musicHint.style.display !== 'none') {
                        musicHint.textContent = 'ğŸ¼ ç‚¹å‡»å³ä¸‹è§’æŒ‰é’®æ’­æ”¾è¥åœ°éŸ³ä¹';
                    }
                }, 10000);
            }
            
            // é¡µé¢åŠ è½½åè®¾ç½®ç”¨æˆ·äº¤äº’ç›‘å¬
            setTimeout(setupUserInteraction, 1000);

            musicToggle.addEventListener('click', async () => {
                musicHint.style.display = 'none';
                
                if (isPlaying) {
                    music.pause();
                    musicIcon.textContent = 'ğŸµ';
                    musicToggle.style.backgroundColor = 'rgba(63, 167, 150, 0.5)';
                    musicToggle.style.transform = 'scale(1)';
                } else {
                    try {
                        // ç¡®ä¿éŸ³é¢‘ä¸Šä¸‹æ–‡å·²å¯åŠ¨
                        if (audioContext && audioContext.state === 'suspended') {
                            await audioContext.resume();
                        }
                        
                        await music.play();
                        musicIcon.textContent = 'ğŸ¶';
                        musicToggle.style.backgroundColor = 'rgba(63, 167, 150, 0.9)';
                        musicToggle.style.transform = 'scale(1.1)';
                    } catch (e) {
                        console.log('éŸ³ä¹æ’­æ”¾å¤±è´¥ï¼š', e);
                        musicIcon.textContent = 'ğŸ”‡';
                        musicToggle.style.backgroundColor = 'rgba(255, 0, 0, 0.5)';
                        // æ˜¾ç¤ºé”™è¯¯æç¤º
                        musicHint.textContent = 'éŸ³ä¹æ’­æ”¾å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œ';
                        musicHint.style.display = 'block';
                        setTimeout(() => {
                            musicHint.style.display = 'none';
                            musicHint.textContent = 'ç‚¹å‡»æ’­æ”¾ã€ŠèŠæ¬¡éƒçš„å¤å¤©ã€‹';
                        }, 2000);
                    }
                }
                isPlaying = !isPlaying;
            });

            // åˆå§‹åŒ–éŸ³é¢‘
            initAudio();

            function renderProgramList(filter = 'all') {
                programListContainer.innerHTML = '';
                const filteredData = programData.filter(item => filter === 'all' || item.type === filter);
                
                filteredData.forEach(item => {
                    const card = document.createElement('div');
                    card.className = 'program-card bg-white border border-gray-200 rounded-lg p-4 flex items-center space-x-4';
                    card.setAttribute('data-type', item.type);

                    const iconMap = {
                        'é’¢ç´': 'ğŸ¹',
                        'å£°ä¹': 'ğŸ¤',
                        'åˆå”±': 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦',
                        'å™¨ä¹': 'ğŸ»',
                    };

                    card.innerHTML = `
                        <div class="text-3xl">${iconMap[item.type] || 'ğŸ¶'}</div>
                        <div class="flex-grow">
                            <p class="font-bold text-gray-800">${item.title}</p>
                            <p class="text-sm text-gray-600">${item.performer} Â· ${item.instrument}</p>
                            <div class="program-details hidden mt-2 p-2 bg-gray-50 rounded text-xs text-gray-500">
                                <p>ğŸµ æ¼”å‡ºç±»å‹: ${item.type}</p>
                                <p>â±ï¸ é¢„è®¡æ—¶é•¿: 3-5åˆ†é’Ÿ</p>
                                <p>ğŸ‘¤ è¡¨æ¼”è€…: ${item.performer}</p>
                            </div>
                        </div>
                        <div class="text-lg font-bold text-grass-green w-10 text-right cursor-pointer hover:scale-110 transition-transform">${String(item.id).padStart(2, '0')}</div>
                    `;
                    
                    // æ·»åŠ ç‚¹å‡»å±•å¼€è¯¦æƒ…åŠŸèƒ½
                    card.addEventListener('click', () => {
                        const details = card.querySelector('.program-details');
                        if (details.classList.contains('hidden')) {
                            details.classList.remove('hidden');
                            card.style.backgroundColor = '#f8fffe';
                        } else {
                            details.classList.add('hidden');
                            card.style.backgroundColor = 'white';
                        }
                    });
                    programListContainer.appendChild(card);
                });
            }
            
            filtersContainer.addEventListener('click', (e) => {
                if (e.target.classList.contains('filter-btn')) {
                    document.querySelectorAll('.filter-btn').forEach(btn => {
                        btn.classList.remove('active-filter');
                        btn.classList.add('inactive-filter');
                    });
                    e.target.classList.add('active-filter');
                    e.target.classList.remove('inactive-filter');
                    renderProgramList(e.target.dataset.filter);
                }
            });

            function startCountdown() {
                const countdownElement = document.getElementById('countdown');
                if (!countdownElement) return;

                const targetDate = new Date('2025-10-08T16:30:00').getTime();

                const interval = setInterval(() => {
                    const now = new Date().getTime();
                    const distance = targetDate - now;

                    if (distance < 0) {
                        clearInterval(interval);
                        countdownElement.innerHTML = "<p>éŸ³ä¹ä¼šå·²å¼€å§‹</p>";
                        return;
                    }

                    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((distance % (1000 * 60)) / 1000);
                    
                    document.getElementById('days').textContent = String(days).padStart(2, '0');
                    document.getElementById('hours').textContent = String(hours).padStart(2, '0');
                    document.getElementById('minutes').textContent = String(minutes).padStart(2, '0');
                    document.getElementById('seconds').textContent = String(seconds).padStart(2, '0');

                }, 1000);
            }

            function setupAnalytics() {
                const totalPrograms = programData.length;
                const totalPerformers = 20; // å›ºå®šä¸º20äºº
                const instrumentalCount = 8; // å™¨ä¹8ä¸ªèŠ‚ç›®
                const vocalCount = 5; // å£°ä¹5ä¸ªèŠ‚ç›®
                
                document.getElementById('total-programs').textContent = totalPrograms;
                document.getElementById('total-performers').textContent = totalPerformers;
                document.getElementById('piano-count').textContent = instrumentalCount;
                document.getElementById('vocal-count').textContent = vocalCount;

                const typeCounts = programData.reduce((acc, curr) => {
                    acc[curr.type] = (acc[curr.type] || 0) + 1;
                    return acc;
                }, {});

                const ctx = document.getElementById('programChart').getContext('2d');
                new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: Object.keys(typeCounts),
                        datasets: [{
                            label: 'èŠ‚ç›®ç±»å‹',
                            data: Object.values(typeCounts),
                            backgroundColor: [
                                '#3FA796', 
                                '#8FD6D0', 
                                '#F6AD55', 
                                '#63B3ED',
                            ],
                            borderColor: '#F8F9FA',
                            borderWidth: 4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        let label = context.label || '';
                                        if (label) {
                                            label += ': ';
                                        }
                                        if (context.parsed !== null) {
                                            label += context.parsed + 'ä¸ªèŠ‚ç›®';
                                        }
                                        return label;
                                    }
                                }
                            }
                        }
                    }
                });
            }

            renderProgramList();
            startCountdown();
            setupAnalytics();
        });
    </script>
</body>
</html>
<!-- Cache-bust: 1759818303 -->
