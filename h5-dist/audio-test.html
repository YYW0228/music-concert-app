<!DOCTYPE html>
<html>
<head>
    <title>éŸ³é¢‘æµ‹è¯• - å¥¥èŠ¬å·´èµ«ã€Šåœ°ç‹±åŠ æ´›æ™®èˆæ›²ã€‹</title>
    <style>
        body { font-family: Arial; padding: 20px; background: #f0f0f0; }
        .test-section { background: white; padding: 20px; margin: 20px 0; border-radius: 10px; }
        audio { width: 100%; margin: 10px 0; }
        button { padding: 10px 20px; margin: 5px; background: #10b981; color: white; border: none; border-radius: 5px; cursor: pointer; }
        .log { background: #f9f9f9; padding: 10px; margin: 10px 0; border-left: 4px solid #10b981; font-family: monospace; }
    </style>
</head>
<body>
    <h1>ğŸµ å¥¥èŠ¬å·´èµ«éŸ³é¢‘æµ‹è¯•é¡µé¢</h1>
    
    <div class="test-section">
        <h2>æµ‹è¯•1: åŸºæœ¬éŸ³é¢‘æ’­æ”¾</h2>
        <audio id="test-audio" controls preload="auto">
            <source src="./static/audio/offenbach-galop-infernal.mp3" type="audio/mpeg">
            æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾ã€‚
        </audio>
        <br>
        <button onclick="playAudio()">â–¶ï¸ æ’­æ”¾éŸ³é¢‘</button>
        <button onclick="pauseAudio()">â¸ï¸ æš‚åœéŸ³é¢‘</button>
        <button onclick="checkAudioInfo()">â„¹ï¸ æ£€æŸ¥éŸ³é¢‘ä¿¡æ¯</button>
    </div>
    
    <div class="test-section">
        <h2>æµ‹è¯•2: æ–‡ä»¶è®¿é—®æ€§</h2>
        <button onclick="testFileAccess()">ğŸ” æµ‹è¯•æ–‡ä»¶æ˜¯å¦å¯è®¿é—®</button>
        <div id="file-test-result"></div>
    </div>
    
    <div class="test-section">
        <h2>è°ƒè¯•ä¿¡æ¯</h2>
        <div id="debug-log" class="log">ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æŸ¥çœ‹è°ƒè¯•ä¿¡æ¯...</div>
    </div>

    <script>
        const audio = document.getElementById('test-audio');
        const debugLog = document.getElementById('debug-log');
        
        function log(message) {
            console.log(message);
            debugLog.innerHTML += message + '<br>';
        }
        
        function playAudio() {
            log('ğŸµ å°è¯•æ’­æ”¾éŸ³é¢‘...');
            audio.play().then(() => {
                log('âœ… æ’­æ”¾æˆåŠŸï¼');
            }).catch(e => {
                log('âŒ æ’­æ”¾å¤±è´¥: ' + e.message);
            });
        }
        
        function pauseAudio() {
            audio.pause();
            log('â¸ï¸ éŸ³é¢‘å·²æš‚åœ');
        }
        
        function checkAudioInfo() {
            log('ğŸ“Š éŸ³é¢‘ä¿¡æ¯:');
            log('- æºåœ°å€: ' + (audio.src || audio.currentSrc));
            log('- æ—¶é•¿: ' + audio.duration + ' ç§’');
            log('- å½“å‰æ—¶é—´: ' + audio.currentTime + ' ç§’');
            log('- éŸ³é‡: ' + audio.volume);
            log('- å‡†å¤‡çŠ¶æ€: ' + audio.readyState);
            log('- ç½‘ç»œçŠ¶æ€: ' + audio.networkState);
        }
        
        function testFileAccess() {
            log('ğŸ” æµ‹è¯•æ–‡ä»¶è®¿é—®...');
            fetch('./static/audio/offenbach-galop-infernal.mp3', {method: 'HEAD'})
                .then(response => {
                    if (response.ok) {
                        log('âœ… æ–‡ä»¶å¯è®¿é—®ï¼Œå¤§å°: ' + response.headers.get('content-length') + ' å­—èŠ‚');
                        log('âœ… æ–‡ä»¶ç±»å‹: ' + response.headers.get('content-type'));
                    } else {
                        log('âŒ æ–‡ä»¶è®¿é—®å¤±è´¥: ' + response.status);
                    }
                })
                .catch(e => {
                    log('âŒ ç½‘ç»œé”™è¯¯: ' + e.message);
                });
        }
        
        // éŸ³é¢‘äº‹ä»¶ç›‘å¬
        audio.addEventListener('error', (e) => {
            log('âŒ éŸ³é¢‘é”™è¯¯: ' + (audio.error?.message || 'æœªçŸ¥é”™è¯¯'));
        });
        
        audio.addEventListener('loadedmetadata', () => {
            log('âœ… éŸ³é¢‘å…ƒæ•°æ®åŠ è½½å®Œæˆ');
        });
        
        audio.addEventListener('canplay', () => {
            log('âœ… éŸ³é¢‘å¯ä»¥æ’­æ”¾');
        });
    </script>
</body>
</html>